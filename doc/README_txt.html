<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: README.txt [ ri_cal's ri_cal-0.0.1 Documentation]</title>

	<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file">
  <div id="metadata">
		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="./Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="./README_txt.html">README.txt</a></li>
				
					<li class="file"><a href="./copyrights_txt.html">copyrights.txt</a></li>
				
					<li class="file"><a href="./docs/draft-ietf-calsify-2446bis-08_txt.html">draft-ietf-calsify-2446bis-08.txt</a></li>
				
					<li class="file"><a href="./docs/draft-ietf-calsify-rfc2445bis-09_txt.html">draft-ietf-calsify-rfc2445bis-09.txt</a></li>
				
					<li class="file"><a href="./docs/incrementers_txt.html">incrementers.txt</a></li>
				
					<li class="file"><a href="./help/History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="./help/Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="./help/README_txt.html">README.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./RiCal.html">RiCal</a></li>
				
					<li><a href="./RiCal/Component.html">RiCal::Component</a></li>
				
					<li><a href="./RiCal/Component/Alarm.html">RiCal::Component::Alarm</a></li>
				
					<li><a href="./RiCal/Component/Calendar.html">RiCal::Component::Calendar</a></li>
				
					<li><a href="./RiCal/Component/Event.html">RiCal::Component::Event</a></li>
				
					<li><a href="./RiCal/Component/Freebusy.html">RiCal::Component::Freebusy</a></li>
				
					<li><a href="./RiCal/Component/Journal.html">RiCal::Component::Journal</a></li>
				
					<li><a href="./RiCal/Component/TZInfoTimezone.html">RiCal::Component::TZInfoTimezone</a></li>
				
					<li><a href="./RiCal/Component/Timezone.html">RiCal::Component::Timezone</a></li>
				
					<li><a href="./RiCal/Component/Timezone/TimezonePeriod.html">RiCal::Component::Timezone::TimezonePeriod</a></li>
				
					<li><a href="./RiCal/Component/Todo.html">RiCal::Component::Todo</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Array/Conversions.html">RiCal::CoreExtensions::Array::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Date/Conversions.html">RiCal::CoreExtensions::Date::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/DateTime/Conversions.html">RiCal::CoreExtensions::DateTime::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Object/Conversions.html">RiCal::CoreExtensions::Object::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/String/Conversions.html">RiCal::CoreExtensions::String::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Time/Calculations.html">RiCal::CoreExtensions::Time::Calculations</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Time/Conversions.html">RiCal::CoreExtensions::Time::Conversions</a></li>
				
					<li><a href="./RiCal/CoreExtensions/Time/WeekDayPredicates.html">RiCal::CoreExtensions::Time::WeekDayPredicates</a></li>
				
					<li><a href="./RiCal/FloatingTimezone.html">RiCal::FloatingTimezone</a></li>
				
					<li><a href="./RiCal/OccurrenceEnumerator.html">RiCal::OccurrenceEnumerator</a></li>
				
					<li><a href="./RiCal/Properties/Alarm.html">RiCal::Properties::Alarm</a></li>
				
					<li><a href="./RiCal/Properties/Calendar.html">RiCal::Properties::Calendar</a></li>
				
					<li><a href="./RiCal/Properties/Event.html">RiCal::Properties::Event</a></li>
				
					<li><a href="./RiCal/Properties/Freebusy.html">RiCal::Properties::Freebusy</a></li>
				
					<li><a href="./RiCal/Properties/Journal.html">RiCal::Properties::Journal</a></li>
				
					<li><a href="./RiCal/Properties/Timezone.html">RiCal::Properties::Timezone</a></li>
				
					<li><a href="./RiCal/Properties/TimezonePeriod.html">RiCal::Properties::TimezonePeriod</a></li>
				
					<li><a href="./RiCal/Properties/Todo.html">RiCal::Properties::Todo</a></li>
				
					<li><a href="./RiCal/PropertyValue.html">RiCal::PropertyValue</a></li>
				
					<li><a href="./RiCal/PropertyValue/CalAddress.html">RiCal::PropertyValue::CalAddress</a></li>
				
					<li><a href="./RiCal/PropertyValue/Date.html">RiCal::PropertyValue::Date</a></li>
				
					<li><a href="./RiCal/PropertyValue/DateTime.html">RiCal::PropertyValue::DateTime</a></li>
				
					<li><a href="./RiCal/PropertyValue/Duration.html">RiCal::PropertyValue::Duration</a></li>
				
					<li><a href="./RiCal/PropertyValue/Geo.html">RiCal::PropertyValue::Geo</a></li>
				
					<li><a href="./RiCal/PropertyValue/OccurrenceList.html">RiCal::PropertyValue::OccurrenceList</a></li>
				
					<li><a href="./RiCal/PropertyValue/Period.html">RiCal::PropertyValue::Period</a></li>
				
					<li><a href="./RiCal/PropertyValue/RecurrenceRule.html">RiCal::PropertyValue::RecurrenceRule</a></li>
				
					<li><a href="./RiCal/PropertyValue/Text.html">RiCal::PropertyValue::Text</a></li>
				
					<li><a href="./RiCal/PropertyValue/Uri.html">RiCal::PropertyValue::Uri</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h2>RI_CAL &#8212; a new implementation of RFC2445 in Ruby</h2>
<pre>
    by Rick DeNatale
    http://talklikeaduck.denhaven2.com
</pre>
<h2>DESCRIPTION:</h2>
<p>
A new Ruby implementation of RFC2445 iCalendar.
</p>
<p>
The existing Ruby iCalendar libraries (e.g. icalendar, vpim) provide for
parsing and generating icalendar files, but do not support important things
like enumerating occurrences of repeating events.
</p>
<p>
This is a clean-slate implementation of RFC2445.
</p>
<h2>FEATURES/PROBLEMS:</h2>
<ul>
<li>All examples of recurring events in RFC 2445 are handled. RSpec examples
are provided for them.

</li>
</ul>
<h2>SYNOPSIS:</h2>
<h3>Components and properties</h3>
<p>
An iCalendar calendar comprises subcomponents like Events, Timezones and
Todos. Each component may have properties, for example an event has a
dtstart property which defines the time (and date) on which the event
starts.
</p>
<p>
<a href="RiCal.html">RiCal</a> components will provide reasonable ruby
objects as the values of these properties, and allow the properties to be
set to ruby objects which are reasonable for the particular property. For
example time properties like dtstart can be set to a ruby Time, DateTime or
Date object, and will return a DateTime or Date object when queried.
</p>
<p>
The methods for accessing the properties of each type of component are
defined in a module with the same name as the component class in the
RiCal::properties module. For example the property accessing methods for <a
href="RiCal/Component/Event.html">RiCal::Component::Event</a> are defined
in <a href="RiCal/Properties/Event.html">RiCal::Properties::Event</a>
</p>
<h3>Creating Calendars and Calendar Components</h3>
<p>
<a href="RiCal.html">RiCal</a> provides a builder DSL for creating
calendars and calendar components. An example
</p>
<pre>
  RiCal.Calendar do
    event do
      description &quot;MA-6 First US Manned Spaceflight&quot;
      dtstart     DateTime.parse(&quot;2/20/1962 14:47:39&quot;)
      dtend       DateTime.parse(&quot;2/20/1962 19:43:02&quot;)
      location    &quot;Cape Canaveral&quot;
      add_attendee &quot;john.glenn@nasa.gov&quot;
      alarm do
        description &quot;Segment 51&quot;
      end
    end
  end
</pre>
<p>
The blocks are evaluated in the context of an object which builds the
calendar or calendar component. method names starting with add_ or remove_
are sent to the component, method names which correspond to a property
value setter of the object being built will cause that setter to be sent to
the component with the provided value.
</p>
<p>
A method corresponding to the name of one of the components sub component
will create the sub component and evaluate the block in the context of the
new subcomponent.
</p>
<h3>Times, Time zones, and Floating Times</h3>
<p>
RFC2445 describes three different kinds of DATE-TIME values with respect to
time zones:
</p>
<pre>
  1. date-times with a local time. These have no actual time zone, instead they are to be interpreted in the local time zone of the viewer.  These floating times are used for things like the New Years celebration which is observed at local midnight whether you happen to be in Paris, London, or New York.

  2. date-times with UTC time.  An application would either display these with an indication of the time zone, or convert them to the viewer's time zone, perhaps depending on user settings.

  3. date-times with a specified time zone.
</pre>
<p>
<a href="RiCal.html">RiCal</a> can be given ruby Time, DateTime, or Date
objects for the value of properties requiring an iCalendar DATE-TIME value.
</p>
<p>
Note that a date only DATE-TIME value has no time zone by definition,
effectively such values float and describe a date as viewed by the user in
his/her local time zone.
</p>
<p>
When a Ruby Time or DateTime instance is used to set properties with with a
DATE-TIME value, it needs to determine which of the three types it
represents. <a href="RiCal.html">RiCal</a> is designed to make use of the
TimeWithZone support which has been part of the ActiveSupport component of
Ruby on Rails since Rails 2.2. However it&#8217;s been carefully designed
not to require Rails or ActiveSupport, but to dynamically detect the
presence of the TimeWithZone support.
</p>
<p>
When the value of a DATE-TIME property is set to a value, the following
processing occurs:
</p>
<ul>
<li>If the object responds to both the :acts_as_time, and :timezone methods
then the result of the timezone method (assumed to be an instance of
TZInfoTimezone) is used as a specific local time zone.

</li>
<li>If not then the default time zone id is used. The normal default timezone
id is &#8220;UTC&#8221;. You can set the default by calling
::RiCal::PropertyValue::DateTime.default_tzid = timezone_identifier, where
timezone_identifier isa string, or nil. If you set the default tzid to
&#8216;none&#8217; or :none, then Times or DateTimes without timezones will
be treated as floating times.

</li>
</ul>
<p>
To explicitly set a floating time you can use the method
#with_floating_timezone on Time or DateTime instances as in
</p>
<pre>
   event.dtstart = Time.parse(&quot;1/1/2010 00:00:00&quot;).with_floating_timezone
</pre>
<h3>Parsing</h3>
<p>
<a href="RiCal.html">RiCal</a> can parse icalendar data from either a
string or a Ruby io object.
</p>
<p>
The data may consist of one or more icalendar calendars, or one or more
icalendar components (e.g. one or more VEVENT, or VTODO objects.)
</p>
<p>
In either case the result will be an array of components.
</p>
<h4>From a string</h4>
<pre>
        RiCal.parse_string &lt;&lt;ENDCAL
        BEGIN:VCALENDAR
        X-WR-TIMEZONE:America/New_York
        PRODID:-//Apple Inc.//iCal 3.0//EN
        CALSCALE:GREGORIAN
        X-WR-CALNAME:test
        VERSION:2.0
        X-WR-RELCALID:1884C7F8-BC8E-457F-94AC-297871967D5E
        X-APPLE-CALENDAR-COLOR:#2CA10B
        BEGIN:VTIMEZONE
        TZID:US/Eastern
        BEGIN:DAYLIGHT
        TZOFFSETFROM:-0500
        TZOFFSETTO:-0400
        DTSTART:20070311T020000
        RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
        TZNAME:EDT
        END:DAYLIGHT
        BEGIN:STANDARD
        TZOFFSETFROM:-0400
        TZOFFSETTO:-0500
        DTSTART:20071104T020000
        RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
        TZNAME:EST
        END:STANDARD
        END:VTIMEZONE
        BEGIN:VEVENT
        SEQUENCE:5
        TRANSP:OPAQUE
        UID:00481E53-9258-4EA7-9F8D-947D3041A3F2
        DTSTART;TZID=US/Eastern:20090224T090000
        DTSTAMP:20090225T000908Z
        SUMMARY:Test Event
        CREATED:20090225T000839Z
        DTEND;TZID=US/Eastern:20090224T100000
        RRULE:FREQ=DAILY;INTERVAL=1;UNTIL=20090228T045959Z
        END:VEVENT
        END:VCALENDAR
        ENDCAL
</pre>
<p>
<b>Beware of the initial whitespace in the above example which is for rdoc
formatting.</b> The parser does not strip initial whitespace from lines in
the file and will fail.
</p>
<p>
As already stated the string argument may be a full icalendar format
calendar, or just one or more subcomponents, e.g.
</p>
<p>
<a
href="RiCal.html#M000001">RiCal.parse_string</a>(&#8220;BEGIN:VEVENTnDTSTART;TZID=US/Eastern:20090224T090000nSUMMARY:Test
EventnDTEND;TZID=US/Eastern:20090224T100000nRRULE:FREQ=DAILY;INTERVAL=1;UNTIL=20090228T045959ZnEND:VEVENT&#8221;)
</p>
<h4>From an Io</h4>
<pre>
        File.open(&quot;path/to/file&quot;, &quot;r&quot;) do |file|
            components = RiCal.parse(file)
        end
</pre>
<h3>Occurrence Enumeration</h3>
<p>
Event, Journal, and Todo components can have recurrences which are defined
following the RFC 2445 specification. A component with recurrences can
enumerate those occurrences.
</p>
<p>
These components have common methods for enumeration which are defined in
the <a
href="RiCal/OccurrenceEnumerator.html">RiCal::OccurrenceEnumerator</a>
module.
</p>
<h4>Obtaining an array of occurrences</h4>
<p>
To get an array of occurrences, Use the <a
href="RiCal/OccurrenceEnumerator.html#M000110">RiCal::OccurrenceEnumerator#occurrences</a>
method:
</p>
<pre>
        event.occurrences
</pre>
<p>
This method may fail with an argument error, if the component has an
unbounded recurrence definition. This happens when one or more of its
RRULES don&#8217;t have a COUNT, or UNTIL part. This may be tested by using
the <a
href="RiCal/OccurrenceEnumerator.html#M000112">RiCal::OccurrenceEnumerator#bounded?</a>
method.
</p>
<p>
In the case of unbounded components, you must either use the :count, or
:before options of the <a
href="RiCal/OccurrenceEnumerator.html#M000110">RiCal::OccurrenceEnumerator#occurrences</a>
method:
</p>
<pre>
        event.occurrences(:count =&gt; 10)
</pre>
<p>
or
</p>
<pre>
  event.occurrences(:before =&gt; Date.today &gt;&gt; 1)
</pre>
<p>
Alternately, you can use the <a
href="RiCal/OccurrenceEnumerator.html#M000111">RiCal::OccurrenceEnumerator#each</a>
method, or another Enumerable method (<a
href="RiCal/OccurrenceEnumerator.html">RiCal::OccurrenceEnumerator</a>
includes Enumerable), and terminate when you wish by breaking out of the
block.
</p>
<pre>
        event.each do |event|
           break if some_termination_condition
           #....
        end
</pre>
<h2>REQUIREMENTS:</h2>
<ul>
<li>FIXME (list of requirements)

</li>
</ul>
<h2>INSTALL:</h2>
<p>
This project was built using the bones gem.
</p>
<p>
For this preview release, I&#8217;m assuming that you received the code
from my private git repository.
</p>
<p>
You can validate it by running
</p>
<pre>
   rake
</pre>
<p>
which will run all of the specs.
</p>
<p>
If you would like to use it as a gem you can use the bones rake tasks:
</p>
<pre>
   rake gem
   rake gem:install
</pre>
<p>
The command
</p>
<pre>
   rake -T
</pre>
<p>
will show additional tasks.
</p>
<h2>LICENSE:</h2>
<p>
Copyright &#169; 2009 Richard J. DeNatale
</p>
<p>
This software and associated documentation files (the
&#8216;Software&#8217;) is an early access version.
</p>
<p>
A Restricted License is hereby granted, free of charge, to use the Software
for evaluation and feedback only
</p>
<p>
This license does not grant you the permission to publish, distribute,
sublicense, or sell copies of the Software.
</p>
<p>
This license applies to previous and future versions of the software, until
such time as a version is released with a license granting additional
rights,
</p>
<p>
THE SOFTWARE IS PROVIDED &#8216;AS IS&#8217;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

