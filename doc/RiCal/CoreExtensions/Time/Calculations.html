<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: RiCal::CoreExtensions::Time::Calculations</title>

	<link rel="stylesheet" href="../../../rdoc.css" type="text/css" media="screen" />

	<script src="../../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../../lib/ri_cal/core_extensions/time/calculations.rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/ri_cal/core_extensions/time/calculations.rb">lib/ri_cal/core_extensions/time/calculations.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#M000096">::convert_wday</a></li>
					
					<li><a href="#M000095">::iso_week_one</a></li>
					
					<li><a href="#M000090">#days_in_month</a></li>
					
					<li><a href="#M000100">#iso_week_num</a></li>
					
					<li><a href="#M000099">#iso_weeks_in_year</a></li>
					
					<li><a href="#M000101">#iso_year</a></li>
					
					<li><a href="#M000097">#iso_year_and_week_one_start</a></li>
					
					<li><a href="#M000102">#iso_year_start</a></li>
					
					<li><a href="#M000089">#leap_year?</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../../History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../../../Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../../../README_txt.html">README.txt</a></li>
				
					<li class="file"><a href="../../../copyrights_txt.html">copyrights.txt</a></li>
				
					<li class="file"><a href="../../../docs/draft-ietf-calsify-2446bis-08_txt.html">draft-ietf-calsify-2446bis-08.txt</a></li>
				
					<li class="file"><a href="../../../docs/draft-ietf-calsify-rfc2445bis-09_txt.html">draft-ietf-calsify-rfc2445bis-09.txt</a></li>
				
					<li class="file"><a href="../../../docs/incrementers_txt.html">incrementers.txt</a></li>
				
					<li class="file"><a href="../../../help/History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../../../help/Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../../../help/README_txt.html">README.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../../RiCal.html">RiCal</a></li>
				
					<li><a href="../../../RiCal/Component.html">RiCal::Component</a></li>
				
					<li><a href="../../../RiCal/Component/Alarm.html">RiCal::Component::Alarm</a></li>
				
					<li><a href="../../../RiCal/Component/Calendar.html">RiCal::Component::Calendar</a></li>
				
					<li><a href="../../../RiCal/Component/Event.html">RiCal::Component::Event</a></li>
				
					<li><a href="../../../RiCal/Component/Freebusy.html">RiCal::Component::Freebusy</a></li>
				
					<li><a href="../../../RiCal/Component/Journal.html">RiCal::Component::Journal</a></li>
				
					<li><a href="../../../RiCal/Component/TZInfoTimezone.html">RiCal::Component::TZInfoTimezone</a></li>
				
					<li><a href="../../../RiCal/Component/Timezone.html">RiCal::Component::Timezone</a></li>
				
					<li><a href="../../../RiCal/Component/Timezone/TimezonePeriod.html">RiCal::Component::Timezone::TimezonePeriod</a></li>
				
					<li><a href="../../../RiCal/Component/Todo.html">RiCal::Component::Todo</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Array/Conversions.html">RiCal::CoreExtensions::Array::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Date/Conversions.html">RiCal::CoreExtensions::Date::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/DateTime/Conversions.html">RiCal::CoreExtensions::DateTime::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Object/Conversions.html">RiCal::CoreExtensions::Object::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/String/Conversions.html">RiCal::CoreExtensions::String::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Time/Calculations.html">RiCal::CoreExtensions::Time::Calculations</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Time/Conversions.html">RiCal::CoreExtensions::Time::Conversions</a></li>
				
					<li><a href="../../../RiCal/CoreExtensions/Time/WeekDayPredicates.html">RiCal::CoreExtensions::Time::WeekDayPredicates</a></li>
				
					<li><a href="../../../RiCal/FloatingTimezone.html">RiCal::FloatingTimezone</a></li>
				
					<li><a href="../../../RiCal/OccurrenceEnumerator.html">RiCal::OccurrenceEnumerator</a></li>
				
					<li><a href="../../../RiCal/Properties/Alarm.html">RiCal::Properties::Alarm</a></li>
				
					<li><a href="../../../RiCal/Properties/Calendar.html">RiCal::Properties::Calendar</a></li>
				
					<li><a href="../../../RiCal/Properties/Event.html">RiCal::Properties::Event</a></li>
				
					<li><a href="../../../RiCal/Properties/Freebusy.html">RiCal::Properties::Freebusy</a></li>
				
					<li><a href="../../../RiCal/Properties/Journal.html">RiCal::Properties::Journal</a></li>
				
					<li><a href="../../../RiCal/Properties/Timezone.html">RiCal::Properties::Timezone</a></li>
				
					<li><a href="../../../RiCal/Properties/TimezonePeriod.html">RiCal::Properties::TimezonePeriod</a></li>
				
					<li><a href="../../../RiCal/Properties/Todo.html">RiCal::Properties::Todo</a></li>
				
					<li><a href="../../../RiCal/PropertyValue.html">RiCal::PropertyValue</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/CalAddress.html">RiCal::PropertyValue::CalAddress</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Date.html">RiCal::PropertyValue::Date</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/DateTime.html">RiCal::PropertyValue::DateTime</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Duration.html">RiCal::PropertyValue::Duration</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Geo.html">RiCal::PropertyValue::Geo</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/OccurrenceList.html">RiCal::PropertyValue::OccurrenceList</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Period.html">RiCal::PropertyValue::Period</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/RecurrenceRule.html">RiCal::PropertyValue::RecurrenceRule</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Text.html">RiCal::PropertyValue::Text</a></li>
				
					<li><a href="../../../RiCal/PropertyValue/Uri.html">RiCal::PropertyValue::Uri</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">RiCal::CoreExtensions::Time::Calculations</h1>

		<div id="description">
			<p>
Provide calculation methods for use by the <a
href="../../../RiCal.html">RiCal</a> gem This module is included by Time,
Date, and DateTime
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="convert-wday-method" class="method-detail ">
				<a name="M000096"></a>

				<div class="method-heading">
				
					<span class="method-name">convert_wday</span><span
						class="method-args">(wday)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Convert the receivers wday to RFC 2445 format. Whereas the Ruby time/date
classes use 0 to represent Sunday, RFC 2445 uses 7.
</p>
					

					
					<div class="method-source-code"
						id="convert-wday-source">
<pre>
    <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 76</span>
76:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">convert_wday</span>(<span class="ruby-identifier">wday</span>)
77:           <span class="ruby-identifier">wday</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">7</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">wday</span>
78:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-week-one-method" class="method-detail ">
				<a name="M000095"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_week_one</span><span
						class="method-args">(year, wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return the date on which the first iso week with a given starting week day
occurs for a given iso year
</p>
<p>
From RFC 2445 page 43: A week is defined as a seven day period, starting on
the day of the week defined to be the week start (see WKST). Week number
one of the calendar year is the first week which contains at least four (4)
days in that calendar year.
</p>
<h2>parameters</h2>
<table>
<tr><td valign="top">year:</td><td>the iso year

</td></tr>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-week-one-source">
<pre>
    <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 32</span>
32:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">iso_week_one</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">wkst</span>)
33:           <span class="ruby-comment cmt"># </span>
34:           <span class="ruby-comment cmt"># Note that wkst uses the ruby definition, with Sunday = 0 </span>
35:           <span class="ruby-comment cmt">#</span>
36:           <span class="ruby-comment cmt"># A good article about calculating ISO week number is at</span>
37:           <span class="ruby-comment cmt"># http://www.boyet.com/Articles/PublishedArticles/CalculatingtheISOweeknumb.html</span>
38:           <span class="ruby-comment cmt">#</span>
39:           <span class="ruby-comment cmt"># RFC 2445 generalizes the notion of ISO week by allowing the start of the week to vary.</span>
40:           <span class="ruby-comment cmt"># In order to adopt the algorithm in the referenced article, we must determine, for each</span>
41:           <span class="ruby-comment cmt"># wkst value, the day in January which must be contained in week 1 of the year.</span>
42:           <span class="ruby-comment cmt"># </span>
43:           <span class="ruby-comment cmt"># For a given wkst week 1 for a year is the first week which</span>
44:           <span class="ruby-comment cmt">#   1) Starts with a day with a wday of wkst</span>
45:           <span class="ruby-comment cmt">#   2) Contains a majority (4 or more) of days in that year</span>
46:           <span class="ruby-comment cmt"># </span>
47:           <span class="ruby-comment cmt"># If end of prior Dec, start of Jan          Week 1 starts on For WKST =</span>
48: 
49:           <span class="ruby-comment cmt"># MO TU WE TH FR SA SU MO TU WE TH FR SA SU  MO    TU    WE    TH    FR    SA    SU      </span>
50:           <span class="ruby-comment cmt"># 01 02 03 04 05 06 07 08 09 10 11 12 13 14 01-07 02-08 03-09 04-10 05-11 06-12 07-13</span>
51:           <span class="ruby-comment cmt"># 31 01 02 03 04 05 06 07 08 09 10 11 12 13 31-06 01-07 02-08 03-09 04-10 05-11 06-12</span>
52:           <span class="ruby-comment cmt"># 30 31 01 02 03 04 05 06 07 08 09 10 11 12 30-05 31-06 01-07 02-08 03-09 04-10 05-11</span>
53:           <span class="ruby-comment cmt"># 29 30 31 01 02 03 04 05 06 07 08 09 10 11 29-04 30-05 31-06 01-07 02-08 03-09 04-10</span>
54:           <span class="ruby-comment cmt"># 28 29 30 31 01 02 03 04 05 06 07 08 09 10 04-10 29-04 30-05 31-06 01-07 02-08 03-09</span>
55:           <span class="ruby-comment cmt"># 27 28 29 30 31 01 02 03 04 05 06 07 08 09 03-09 04-10 29-04 30-05 31-06 01-07 02-08</span>
56:           <span class="ruby-comment cmt"># 26 27 28 29 30 31 01 02 03 04 05 06 07 08 02-08 03-09 04-10 29-04 30-05 31-06 01-07</span>
57:           <span class="ruby-comment cmt"># 25 26 27 28 29 30 31 01 02 03 04 05 06 07 01-07 02-08 03-09 04-10 29-04 30-05 31-06</span>
58:           <span class="ruby-comment cmt">#                     Week 1 must contain     4     4     4     4     ?     ?     ?  </span>
59:           <span class="ruby-comment cmt">#</span>
60:           <span class="ruby-comment cmt"># So for a wkst of FR, SA, or SU, there is no date which MUST be contained in the 1st week</span>
61:           <span class="ruby-comment cmt"># We'll have to brute force that</span>
62:           <span class="ruby-keyword kw">if</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">wkst</span>)
63:             <span class="ruby-comment cmt"># return the date of the wkst day which is less than or equal to jan4th</span>
64:             <span class="ruby-identifier">jan4th</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">year</span>, <span class="ruby-value">1</span>, <span class="ruby-value">4</span>)
65:             <span class="ruby-identifier">result</span> = <span class="ruby-identifier">jan4th</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">convert_wday</span>(<span class="ruby-identifier">jan4th</span>.<span class="ruby-identifier">wday</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">convert_wday</span>(<span class="ruby-identifier">wkst</span>))
66:           <span class="ruby-keyword kw">else</span>
67:             <span class="ruby-comment cmt"># return the date of the wkst day which is greater than or equal to Dec 31 of the prior year</span>
68:             <span class="ruby-identifier">dec29th</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">year</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-value">12</span>, <span class="ruby-value">29</span>)
69:             <span class="ruby-identifier">result</span> = <span class="ruby-identifier">dec29th</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">convert_wday</span>(<span class="ruby-identifier">wkst</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">convert_wday</span>(<span class="ruby-identifier">dec29th</span>.<span class="ruby-identifier">wday</span>)
70:           <span class="ruby-keyword kw">end</span>
71:           <span class="ruby-identifier">result</span>
72:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="days-in-month-method" class="method-detail ">
				<a name="M000090"></a>

				<div class="method-heading">
				
					<span class="method-name">days_in_month</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return the number of days in the month which includes the receiver
</p>
					

					
					<div class="method-source-code"
						id="days-in-month-source">
<pre>
    <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 13</span>
13:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">days_in_month</span>
14:           <span class="ruby-identifier">raw</span> = [<span class="ruby-value">0</span>, <span class="ruby-value">31</span>, <span class="ruby-value">28</span>, <span class="ruby-value">31</span>, <span class="ruby-value">30</span>, <span class="ruby-value">31</span>, <span class="ruby-value">30</span>, <span class="ruby-value">31</span>, <span class="ruby-value">31</span>, <span class="ruby-value">30</span>, <span class="ruby-value">31</span>, <span class="ruby-value">30</span>, <span class="ruby-value">31</span>][<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">month</span>]
15:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">month</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">leap_year?</span> <span class="ruby-value">? </span><span class="ruby-identifier">raw</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">raw</span>
16:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-week-num-method" class="method-detail ">
				<a name="M000100"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_week_num</span><span
						class="method-args">(wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
return the iso week number of the receiver
</p>
<h2>parameter</h2>
<table>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-week-num-source">
<pre>
     <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 128</span>
128:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iso_week_num</span>(<span class="ruby-identifier">wkst</span>)
129:           <span class="ruby-identifier">iso_year_and_week_num</span>(<span class="ruby-identifier">wkst</span>)[<span class="ruby-value">1</span>]
130:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-weeks-in-year-method" class="method-detail ">
				<a name="M000099"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_weeks_in_year</span><span
						class="method-args">(wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
return the number of weeks in the the iso year containing the receiver
</p>
<h2>parameter</h2>
<table>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-weeks-in-year-source">
<pre>
     <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 114</span>
114:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iso_weeks_in_year</span>(<span class="ruby-identifier">wkst</span>)
115:           <span class="ruby-identifier">iso_year</span>, <span class="ruby-identifier">week_one_start</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">iso_year_and_week_one_start</span>(<span class="ruby-identifier">wkst</span>)
116:           <span class="ruby-identifier">probe_date</span> = <span class="ruby-identifier">week_one_start</span> <span class="ruby-operator">+</span> (<span class="ruby-value">7</span><span class="ruby-operator">*</span><span class="ruby-value">52</span>)
117:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">probe_date</span>.<span class="ruby-identifier">iso_year</span>(<span class="ruby-identifier">wkst</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">iso_year</span>
118:             <span class="ruby-value">53</span>
119:           <span class="ruby-keyword kw">else</span>
120:             <span class="ruby-value">52</span>
121:           <span class="ruby-keyword kw">end</span>
122:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-year-method" class="method-detail ">
				<a name="M000101"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_year</span><span
						class="method-args">(wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
return the iso year of the receiver
</p>
<h2>parameter</h2>
<table>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-year-source">
<pre>
     <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 136</span>
136:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iso_year</span>(<span class="ruby-identifier">wkst</span>)
137:           <span class="ruby-identifier">iso_year_and_week_num</span>(<span class="ruby-identifier">wkst</span>)[<span class="ruby-value">0</span>]
138:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-year-and-week-one-start-method" class="method-detail ">
				<a name="M000097"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_year_and_week_one_start</span><span
						class="method-args">(wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return an array containing the iso year and iso week number for the
receiver. Note that the iso year may be the year before or after the
calendar year containing the receiver.
</p>
<h2>parameter</h2>
<table>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-year-and-week-one-start-source">
<pre>
     <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 85</span>
 85:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iso_year_and_week_one_start</span>(<span class="ruby-identifier">wkst</span>)
 86:           <span class="ruby-identifier">iso_year</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">year</span>
 87:           <span class="ruby-identifier">date</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">year</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">month</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">mday</span>)
 88:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">date</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-operator">::</span><span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">iso_year</span>, <span class="ruby-value">12</span>, <span class="ruby-value">29</span>))
 89:             <span class="ruby-identifier">week_one_start</span> =  <span class="ruby-constant">Calculations</span>.<span class="ruby-identifier">iso_week_one</span>(<span class="ruby-identifier">iso_year</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">wkst</span>)
 90:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">week_one_start</span>
 91:               <span class="ruby-identifier">week_one_start</span> = <span class="ruby-constant">Calculations</span>.<span class="ruby-identifier">iso_week_one</span>(<span class="ruby-identifier">iso_year</span>, <span class="ruby-identifier">wkst</span>)
 92:             <span class="ruby-keyword kw">else</span>
 93:               <span class="ruby-identifier">iso_year</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
 94:             <span class="ruby-keyword kw">end</span>
 95:           <span class="ruby-keyword kw">else</span>
 96:             <span class="ruby-identifier">week_one_start</span> = <span class="ruby-constant">Calculations</span>.<span class="ruby-identifier">iso_week_one</span>(<span class="ruby-identifier">iso_year</span>, <span class="ruby-identifier">wkst</span>)
 97:             <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">date</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">week_one_start</span>)
 98:               <span class="ruby-identifier">iso_year</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
 99:               <span class="ruby-identifier">week_one_start</span> = <span class="ruby-constant">Calculations</span>.<span class="ruby-identifier">iso_week_one</span>(<span class="ruby-identifier">iso_year</span>, <span class="ruby-identifier">wkst</span>)
100:             <span class="ruby-keyword kw">end</span>
101:           <span class="ruby-keyword kw">end</span>
102:           [<span class="ruby-identifier">iso_year</span>, <span class="ruby-identifier">week_one_start</span>]
103:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="iso-year-start-method" class="method-detail ">
				<a name="M000102"></a>

				<div class="method-heading">
				
					<span class="method-name">iso_year_start</span><span
						class="method-args">(wkst)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
return the first day of the iso year of the receiver
</p>
<h2>parameter</h2>
<table>
<tr><td valign="top">wkst:</td><td>an integer representing the day of the week on which weeks are deemed to
start. This uses

</td></tr>
</table>
<p>
the ruby convention where 0 represents Sunday.
</p>
					

					
					<div class="method-source-code"
						id="iso-year-start-source">
<pre>
     <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 144</span>
144:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iso_year_start</span>(<span class="ruby-identifier">wkst</span>)
145:           <span class="ruby-identifier">iso_year_and_week_one_start</span>(<span class="ruby-identifier">wkst</span>)[<span class="ruby-value">1</span>]
146:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
			<div id="leap-year--method" class="method-detail ">
				<a name="M000089"></a>

				<div class="method-heading">
				
					<span class="method-name">leap_year?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A predicate method used to determine if the receiver is within a leap year
</p>
					

					
					<div class="method-source-code"
						id="leap-year--source">
<pre>
    <span class="ruby-comment cmt"># File lib/ri_cal/core_extensions/time/calculations.rb, line 8</span>
 8:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">leap_year?</span>
 9:           <span class="ruby-identifier">year</span> <span class="ruby-operator">%</span> <span class="ruby-value">4</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">%</span> <span class="ruby-value">400</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">year</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
10:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

